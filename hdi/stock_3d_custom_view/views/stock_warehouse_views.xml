<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Warehouse Layout Editor View -->
    <record id="stock_warehouse_layout_view" model="ir.ui.view">
        <field name="name">stock.warehouse.view.form.layout</field>
        <field name="model">stock.warehouse</field>
        <field name="inherit_id" ref="stock.view_warehouse"/>
        <field name="arch" type="xml">
            <!-- Add Layout Editor button at the top of the form -->
            <xpath expr="//sheet" position="before">
                <div class="alert alert-info">
                    <button type="object" 
                            name="action_open_warehouse_layout_editor"
                            string="Open Layout Editor (2D/3D)" 
                            id="warehouse_layout_editor_button"
                            class="btn btn-primary btn-lg"/>
                </div>
            </xpath>
            <!-- Add 3D Properties tab in warehouse form -->
            <xpath expr="//notebook" position="inside">
                <page string="Layout Configuration" id="layout_config_page">
                    <group>
                        <group string="Layout Dimensions">
                            <field name="layout_width"
                                   help="Width of the warehouse layout canvas in pixels"/>
                            <field name="layout_height"
                                   help="Height of the warehouse layout canvas in pixels"/>
                        </group>
                        <group string="Layout Status">
                            <field name="is_2d_configured"
                                   widget="boolean"/>
                        </group>
                    </group>
                    <separator string="Instructions"/>
                    <p>
                        Click <strong>Layout Editor (2D/3D)</strong> button to:
                        <ul>
                            <li>Draw shelves and bins in 2D view (left panel)</li>
                            <li>Preview 3D warehouse layout (center panel)</li>
                            <li>Manage inventory items (right panel)</li>
                        </ul>
                    </p>
                </page>
            </xpath>
        </field>
    </record>

    <!-- Client Action for Warehouse Layout Editor -->
    <record id="stock_warehouse_layout_editor_action" model="ir.actions.client">
        <field name="name">Warehouse Layout Editor</field>
        <field name="tag">open_warehouse_layout_editor</field>
    </record>
</odoo>
