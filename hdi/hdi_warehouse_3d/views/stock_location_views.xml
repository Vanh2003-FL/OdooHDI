<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Bin List View (Standalone) -->
    <record id="view_stock_location_tree_bins" model="ir.ui.view">
        <field name="name">stock.location.tree.bins</field>
        <field name="model">stock.location</field>
        <field name="arch" type="xml">
            <list string="Warehouse Bins" create="true" delete="false">
                <field name="name"/>
                <field name="shelf_id"/>
                <field name="level_number"/>
                <field name="bin_number"/>
                <field name="barcode"/>
                <field name="bin_state" widget="badge"/>
                <field name="is_locked" widget="badge"/>
            </list>
        </field>
    </record>

    <!-- Bin Form View (Standalone) -->
    <record id="view_stock_location_form_bins" model="ir.ui.view">
        <field name="name">stock.location.form.bins</field>
        <field name="model">stock.location</field>
        <field name="arch" type="xml">
            <form string="Warehouse Bin">
                <sheet>
                    <div class="alert alert-info" role="alert" invisible="id">
                        <strong>üí° Creating a Bin Manually</strong><br/>
                        For best practice, create bins automatically by creating a <strong>Shelf</strong> first.<br/>
                        When you set level_count and bins_per_level on a shelf, all bins auto-generate.
                    </div>
                    
                    <div class="alert alert-danger" role="alert" invisible="not is_locked">
                        <strong>üîí LOCKED BIN</strong><br/>
                        This bin has inventory. Cannot be moved/resized/deleted.<br/>
                        <strong>‚úÖ Allowed:</strong> Block/Unblock | <strong>‚ùå Not Allowed:</strong> Move, Resize, Delete
                    </div>
                    
                    <group>
                        <group>
                            <field name="name" required="1"/>
                            <field name="barcode"/>
                            <field name="shelf_id" required="1"/>
                        </group>
                        <group>
                            <field name="level_number" required="1"/>
                            <field name="bin_number" required="1"/>
                            <field name="bin_state" widget="badge"/>
                        </group>
                    </group>
                    
                    <group string="Position &amp; Dimensions">
                        <group>
                            <field name="coordinate_x"/>
                            <field name="coordinate_y"/>
                            <field name="coordinate_z"/>
                        </group>
                        <group>
                            <field name="bin_width"/>
                            <field name="bin_depth"/>
                            <field name="bin_height"/>
                        </group>
                    </group>
                    
                    <group string="Capacity &amp; Status">
                        <group>
                            <field name="max_capacity"/>
                            <field name="max_weight"/>
                            <field name="is_locked" widget="badge" invisible="not is_locked"/>
                        </group>
                        <group>
                            <field name="is_blocked" widget="boolean_toggle"/>
                            <field name="block_reason" invisible="not is_blocked"/>
                            <field name="display_color" widget="color"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Bins Action (filtered stock.location) -->
    <record id="action_warehouse_bins" model="ir.actions.act_window">
        <field name="name">Bins</field>
        <field name="res_model">stock.location</field>
        <field name="view_mode">list,form</field>
        <field name="view_id" ref="view_stock_location_tree_bins"/>
        <!-- No domain restriction - allows free creation -->
        <field name="context">{
            'search_default_internal': 1,
            'default_usage': 'internal',
        }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new Bin
            </p>
            <p>
                <strong>üí° Recommended Method:</strong> Create bins automatically by creating a <strong>Shelf</strong> first.<br/>
                When you create a Shelf with level_count and bins_per_level, all bins are auto-generated.<br/><br/>
                
                <strong>Manual Bin Creation:</strong>
                <ol>
                    <li>Click <strong>‚úö Create</strong> button above</li>
                    <li>Fill in required fields:
                        <ul>
                            <li><strong>Name</strong> (Location Name) - e.g., "BIN-L1-B1"</li>
                            <li><strong>Parent Location</strong> - warehouse stock location</li>
                            <li><strong>Shelf</strong> (required) - select shelf</li>
                            <li><strong>Level Number</strong> - 1, 2, 3, 4...</li>
                            <li><strong>Bin Number</strong> - position on level</li>
                        </ul>
                    </li>
                    <li>Save ‚Üí coordinates &amp; barcode auto-calculate</li>
                </ol>
            </p>
        </field>
    </record>
</odoo>
