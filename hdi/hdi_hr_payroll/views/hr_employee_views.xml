<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- ============================================ -->
    <!-- HR EMPLOYEE - TAB TH√îNG TIN THU·∫æ & GI·∫¢M TR·ª™ -->
    <!-- ============================================ -->
    
    <record id="view_employee_form_payroll" model="ir.ui.view">
        <field name="name">hr.employee.form.payroll</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form"/>
        <field name="arch" type="xml">
            
            <!-- Th√™m Smart Buttons -->
            <xpath expr="//div[@name='button_box']" position="inside">
                
                <!-- Button xem Phi·∫øu l∆∞∆°ng -->
                <button name="action_view_payslips"
                    type="object"
                    class="oe_stat_button"
                    icon="fa-money"
                    groups="hr.group_hr_user">
                    <field name="payslip_count" widget="statinfo" string="Phi·∫øu l∆∞∆°ng"/>
                </button>
                
                <!-- Button xem Ng∆∞·ªùi ph·ª• thu·ªôc -->
                <button name="action_view_dependents"
                    type="object"
                    class="oe_stat_button"
                    icon="fa-users"
                    groups="hr.group_hr_user">
                    <field name="dependent_count" widget="statinfo" string="Ng∆∞·ªùi ph·ª• thu·ªôc"/>
                </button>
                
            </xpath>
            
            <!-- Th√™m Tab "Thu·∫ø & Gi·∫£m tr·ª´" -->
            <xpath expr="//notebook" position="inside">
                <page string="Thu·∫ø &amp; Gi·∫£m tr·ª´" name="tax_deduction" groups="hr.group_hr_user">
                    <group>
                        <group string="Th√¥ng tin thu·∫ø">
                            <field name="tax_id"/>
                            <field name="tax_registration_date"/>
                        </group>
                        <group string="B·∫£o hi·ªÉm">
                            <field name="social_insurance_number"/>
                            <field name="social_insurance_date"/>
                            <field name="health_insurance_number"/>
                        </group>
                    </group>
                    
                    <group>
                        <group string="Gi·∫£m tr·ª´ thu·∫ø TNCN" name="tax_deduction_group">
                            <field name="personal_deduction" 
                                widget="monetary"
                                options="{'currency_field': 'currency_id'}"/>
                            <field name="dependent_count" readonly="1"/>
                            <field name="dependent_deduction"
                                widget="monetary"
                                options="{'currency_field': 'currency_id'}"/>
                            <field name="total_deduction" 
                                widget="monetary"
                                options="{'currency_field': 'currency_id'}"
                                readonly="1"
                                class="oe_subtotal_footer_separator"/>
                            <field name="currency_id" invisible="1"/>
                        </group>
                        <group></group>
                    </group>
                    
                    <separator string="Danh s√°ch ng∆∞·ªùi ph·ª• thu·ªôc"/>
                    <field name="dependent_ids" nolabel="1"/>
                    
                    <separator string="Ghi ch√∫" invisible="1"/>
                    <div class="alert alert-info" role="alert">
                        <strong>üí° L∆∞u √Ω:</strong>
                        <ul>
                            <li><strong>Gi·∫£m tr·ª´ b·∫£n th√¢n:</strong> 11,000,000 VNƒê/th√°ng (theo quy ƒë·ªãnh 2024)</li>
                            <li><strong>Gi·∫£m tr·ª´ ng∆∞·ªùi ph·ª• thu·ªôc:</strong> 4,400,000 VNƒê/th√°ng/ng∆∞·ªùi</li>
                            <li>Ch·ªâ t√≠nh ng∆∞·ªùi ph·ª• thu·ªôc ƒëang <strong>active</strong> (trong kho·∫£ng th·ªùi gian √°p d·ª•ng)</li>
                            <li>T·ªïng gi·∫£m tr·ª´ = B·∫£n th√¢n + (S·ªë ng∆∞·ªùi PT √ó 4.4tr)</li>
                        </ul>
                    </div>
                    
                </page>
            </xpath>
            
        </field>
    </record>

</odoo>
